trigger:
- main
 
pool:
  vmImage: 'ubuntu-latest'
  name: Self_hosted_Api
 
steps:
- script: |
    python3 --version
  displayName: 'Show Python version'
 
- script: |
    python3 -m pip install --upgrade pip
    python3 -m pip install -r requirements.txt
  displayName: 'Install dependencies'
 
- script: |
    /home/ubuntu/.local/bin/pytest
  displayName: 'Run tests'
- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: '$(Build.ArtifactStagingDirectory)'
    ArtifactName: 'Api_pipeline'
    publishLocation: 'Container'
